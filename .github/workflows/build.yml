name: Build Images
on:
  workflow_dispatch:
  push:
    branches:
      - master
      - develop
      - main
  schedule:
    - cron: '0 5 * * *'

jobs:
  build-linux:
    strategy:
      fail-fast: false
#      max-parallel: 2
      matrix:
        include:
          - name: ubuntu-24
            tags: "ubuntu-noble ubuntu-24 ubuntu latest"
          - name: ubuntu-22
            tags: "ubuntu-jammy ubuntu-22"
          - name: ubuntu-20
            tags: "ubuntu-focal ubuntu-20"
          - name: debian-13
            tags: "debian-trixie debian-13 debian-latest"
          - name: debian-12
            tags: "debian-bookworm debian-12"
          - name: debian-11
            tags: "debian-bullseye debian-11"
          - name: debian-10
            tags: "debian-buster debian-10"
          - name: alpine-3
            tags: "alpine alpine-3 alpine-latest"
          - name: rocky-9
            tags: "rocky rocky-9 rocky-latest"
          - name: centos-9
            tags: "centos centos-9 centos-latest"
          - name: cachyos
            tags: "cachyos cachyos-latest"
    uses: ./.github/workflows/_build-linux.yml
    secrets: inherit
    with:
      name: ${{ matrix.name }}
      tags: ${{ matrix.tags }}
